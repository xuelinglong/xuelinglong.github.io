---
title: '2017-12-23'
date: 2017-12-23 22:00:53
tags: 周报
---

# 本周做的事
发布，评论，消息模块。

# 遇到的问题
## 登录以后获取到已收藏的话题，如何把他们与未收藏的话题做区分；
可以写一个isCollected属性来控制话题是否被收藏，但是我现在还搞不明白这个属性应该在什么时候以什么方式赋给topicSubject。

## 发布新主题时输入content内容时如何使用markdown语法；
现在的情况是可以成功发布新主题，但是content内容不能识别markdown语法.
<!-- more -->
## axios.post();
url需要使用参数拼接时，怎么不让拼接错为get方法：
```
    const HOST = 'https://www.vue-js.com/api/v1/';
    [type.PUSH_REPLIES](context, payload) {
        axios.post(HOST + 'topic/' + payload.topicid + '/replies', {
            accesstoken: payload.accesstoken,
            content: payload.content,
            reply_id: payload.replyid
        }).then(res => {
            context.commit(type.PUSH_REPLIES, {
                data: res.data.data
            });
        }).catch(err => console.log(err));
    }
```

## 提示用户登录时的自动跳转到登录页面；
未登录时msg,push显示有提示登录的按钮，点击之后应该自动跳转到 my页面登录.

## 滑动加载；
错误表现：此时会在未滑动时执行一次loadmore。
因为获取数据是在topics页面 ---> container包含list ---> list包含card，滑动加载写在container外面，此时只要进入首页就会自动执行一次 loadMore ，距离阙值设的50px.

## header应该是固定在顶部的；
未登录时首页header固定在顶部，登录账号以后，header位置就不固定了，向下滑动时header会向上隐藏。
header组件设置的是fixed，不知道为什么会出现这种情况，要仔细找找问题出在哪里。

# 下周目标；
1. 解决上面的问题；
2. 完善未读消息的ui样式；
3. 下拉刷新，滑动加载；
4. 区分收藏与未收藏的话题；
5. cookie记录登录过的accesstoken;
6. 发表评论功能；
7. 文件格式化;
8. 下周结束本项目，学习发布流程。

# 收获
经过本周的学习，发现了很多不足之处：
1. 不注意使用npm run lint，代码格式不规范；
2. vuex各模块之间关系弄得比较乱；
3. 四个选项卡，只需要四个page,里面添加子页面就好，页面逻辑也整体很乱；
4. 缺少对vue插件的使用学习。
